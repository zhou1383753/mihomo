import{r as w,R as V,i as L,j as s,b as u,B as b,h as _,W as Ie,c as g,X as We,Y as ve,Z as ye,d as C,_ as He,F as q,$ as Ge,a0 as me,a1 as J,D as Ue,x as j,a2 as Ke,a3 as Ye,a4 as Z,G as Ve,a5 as _e,a6 as ee,a7 as te,a8 as Ze,a9 as Xe,u as ne,aa as Qe,ab as be,ac as Je,g as ge,C as we,E as oe,ad as et,m as se,M as tt,ae as nt,af as rt,ag as ot,ah as st}from"./index-d6e076f8.js";import{C as it}from"./chevron-down-51000914.js";import{F as at,p as ct,A as lt,I as ut}from"./Fab-c394f023.js";import{R as dt,T as ht}from"./TextFitler-21bdbf04.js";import{f as ft}from"./index-84fa0cb3.js";import{R as pt}from"./rotate-cw-c0e30cc8.js";import{S as vt}from"./Select-050b7b4d.js";import"./debounce-c1ba2006.js";function X(){return X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},X.apply(this,arguments)}function yt(e,t){if(e==null)return{};var n=mt(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function mt(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}var re=w.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=e.size,i=o===void 0?24:o,a=yt(e,["color","size"]);return V.createElement("svg",X({ref:t,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),V.createElement("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"}))});re.propTypes={color:L.string,size:L.oneOfType([L.string,L.number])};re.displayName="Zap";const S=re,_t="_FlexCenter_1380a_1",bt={FlexCenter:_t};function gt({children:e}){return s("div",{className:bt.FlexCenter,children:e})}const{useRef:ie,useEffect:wt}=_;function xt({onClickPrimaryButton:e,onClickSecondaryButton:t}){const n=ie(null),r=ie(null);return wt(()=>{n.current.focus()},[]),u("div",{onKeyDown:i=>{i.keyCode===39?r.current.focus():i.keyCode===37&&n.current.focus()},children:[s("h2",{children:"Close Connections?"}),s("p",{children:"Click 'Yes' to close those connections that are still using the old selected proxy in this group"}),s("div",{style:{height:30}}),u(gt,{children:[s(b,{onClick:e,ref:n,children:"Yes"}),s("div",{style:{width:20}}),s(b,{onClick:t,ref:r,children:"No"})]})]})}const Ct="_header_1y9js_1",Ot="_arrow_1y9js_8",Pt="_isOpen_1y9js_13",kt="_btn_1y9js_20",Et="_qty_1y9js_25",P={header:Ct,arrow:Ot,isOpen:Pt,btn:kt,qty:Et};function xe({name:e,type:t,toggle:n,isOpen:r,qty:o}){const i=w.useCallback(a=>{a.preventDefault(),(a.key==="Enter"||a.key===" ")&&n()},[n]);return u("div",{className:P.header,onClick:n,style:{cursor:"pointer"},tabIndex:0,onKeyDown:i,role:"button",children:[s("div",{children:s(Ie,{name:e,type:t})}),typeof o=="number"?s("span",{className:P.qty,children:o}):null,s(b,{kind:"minimal",onClick:n,className:P.btn,title:"Toggle collapsible section",children:s("span",{className:g(P.arrow,{[P.isOpen]:r}),children:s(it,{size:20})})})]})}const{useMemo:Tt}=_;function St(e,t){return e.filter(n=>{const r=t[n];return r===void 0?!0:r.number!==0})}const N=(e,t)=>{if(e&&typeof e.number=="number"&&e.number>0)return e.number;const n=t&&t.type;return n&&ye.indexOf(n)>-1?-1:999999},Rt={Natural:e=>e,LatencyAsc:(e,t,n)=>e.sort((r,o)=>{const i=N(t[r],n&&n[r]),a=N(t[o],n&&n[o]);return i-a}),LatencyDesc:(e,t,n)=>e.sort((r,o)=>{const i=N(t[r],n&&n[r]);return N(t[o],n&&n[o])-i}),NameAsc:e=>e.sort(),NameDesc:e=>e.sort((t,n)=>t>n?-1:t<n?1:0)};function Mt(e,t){const n=t.toLowerCase().split(" ").map(r=>r.trim()).filter(r=>!!r);return n.length===0?e:e.filter(r=>{let o=0;for(;o<n.length;o++){const i=n[o];if(r.toLowerCase().indexOf(i)>-1)return!0}return!1})}function At(e,t,n,r,o,i){let a=[...e];return n&&(a=St(e,t)),typeof r=="string"&&r!==""&&(a=Mt(a,r)),Rt[o](a,t,i)}function Ce(e,t,n,r,o){const[i]=We(ve);return Tt(()=>At(e,t,n,i,r,o),[e,t,n,i,r,o])}const Dt="_header_1g0y5_1",Lt="_zapWrapper_1g0y5_5",Oe={header:Dt,zapWrapper:Lt},Pe={Right:39,Left:37,Enter:13,Space:32},Nt="_proxy_qhifx_4",Bt="_now_qhifx_25",$t="_error_qhifx_29",Ft="_selectable_qhifx_32",zt="_proxyType_qhifx_40",qt="_udpType_qhifx_50",jt="_tfoType_qhifx_61",It="_row_qhifx_65",Wt="_proxyName_qhifx_71",Ht="_proxySmall_qhifx_82",v={proxy:Nt,now:Bt,error:$t,selectable:Ft,proxyType:zt,udpType:qt,tfoType:jt,row:It,proxyName:Wt,proxySmall:Ht},Gt="_proxyLatency_1s3c2_4",Ut={proxyLatency:Gt};function Kt({number:e,color:t}){return s("span",{className:Ut.proxyLatency,style:{color:t},children:u("span",{children:[e," ms"]})})}const{useMemo:T}=_,k={good:"#67c23a",normal:"#d4b75c",bad:"#e67f3c",na:"#909399"};function ke({number:e}={}){return e===0?k.na:e<200?k.good:e<500?k.normal:typeof e=="number"?k.bad:k.na}function Yt(e,t){return ye.indexOf(t)>-1?"linear-gradient(135deg, white 15%, #999 15% 30%, white 30% 45%, #999 45% 60%, white 60% 75%, #999 75% 90%, white 90% 100%)":ke(e)}function Vt({now:e,name:t,proxy:n,latency:r,isSelectable:o,onClick:i}){const a=T(()=>Yt(r,n.type),[r,n]),c=T(()=>{let f=t;return r&&typeof r.number=="number"&&(f+=" "+r.number+" ms"),f},[t,r]),l=w.useCallback(()=>{o&&i&&i(t)},[t,i,o]),d=T(()=>g(v.proxySmall,{[v.now]:e,[v.selectable]:o}),[o,e]),h=w.useCallback(f=>{f.keyCode===Pe.Enter&&l()},[l]);return s("div",{title:c,className:d,style:{background:a},onClick:l,onKeyDown:h,role:o?"menuitem":""})}function Zt(e){return e==="Shadowsocks"?"SS":e}const Xt=e=>({left:e.left+window.scrollX-5,top:e.top+window.scrollY-38});function Qt({children:e,label:t,"aria-label":n}){const[r,o]=He();return u(q,{children:[w.cloneElement(e,r),s(Ge,{...o,label:t,"aria-label":n,position:Xt})]})}function Jt({now:e,name:t,proxy:n,latency:r,isSelectable:o,onClick:i}){const a=T(()=>ke(r),[r]),c=w.useCallback(()=>{o&&i&&i(t)},[t,i,o]);function l(p,y){return p?y?"XUDP":"UDP":""}function d(p){return p?s("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2962",width:"10",height:"10",children:s("path",{d:"M648.093513 719.209284l-1.492609-40.940127 31.046263-26.739021c202.73892-174.805813 284.022131-385.860697 255.70521-561.306199-176.938111-28.786027-389.698834 51.857494-563.907604 254.511123l-26.31256 30.619803-40.38573-0.938211c-60.557271-1.407317-111.903014 12.79379-162.822297 47.0385l189.561318 127.084977-37.95491 68.489421c-9.126237 16.461343-0.554398 53.307457 29.084549 82.818465 29.5963 29.511008 67.380626 38.381369 83.287571 29.852176l68.318836-36.760822 127.639376 191.267156c36.163779-52.11337 50.450177-103.629696 48.189941-165.039887zM994.336107 16.105249l10.490908 2.686696 2.64405 10.405615c47.46496 178.089552-1.023503 451.492838-274.170913 686.898568 4.051367 111.263324-35.396151 200.222809-127.255561 291.741051l-15.779008 15.693715-145.934494-218.731157c-51.217805 27.59194-128.790816 10.405616-183.93205-44.522388-55.226525-55.013296-72.41285-132.287785-43.498885-184.529093L0.002773 430.325513l15.736362-15.65107c89.300652-88.959484 178.64395-128.108481 289.011709-125.549722C539.730114 15.806727 815.56422-31.061189 994.336107 16.105249zM214.93844 805.098259c28.572797 28.572797 22.346486 79.49208-12.537914 114.376479C156.428175 965.489735 34.034254 986.002445 34.034254 986.002445s25.331704-127.084978 66.612998-168.323627c34.8844-34.8844 85.633099-41.281295 114.291188-12.580559zM661.01524 298.549479a63.968948 63.968948 0 1 0 0 127.937897 63.968948 63.968948 0 0 0 0-127.937897z","p-id":"2963"})}):""}const h=w.useCallback(p=>{p.keyCode===Pe.Enter&&c()},[c]),f=T(()=>g(v.proxy,{[v.now]:e,[v.error]:r&&r.error,[v.selectable]:o}),[o,e,r]);return u("div",{tabIndex:0,className:f,onClick:c,onKeyDown:h,role:o?"menuitem":"",children:[u("div",{className:g(v.proxyName,v.row),children:[s(Qt,{label:t,"aria-label":`proxy name: ${t}`,children:s("span",{children:t})}),s("span",{className:v.proxyType,style:{paddingLeft:4,opacity:e?.6:.2},children:l(n.udp,n.xudp)})]}),u("div",{className:v.row,children:[u("div",{className:v.row,children:[s("span",{className:v.proxyType,style:{paddingRight:4,opacity:e?.6:.2},children:Zt(n.type)}),d(n.tfo)]}),r&&r.number?s(Kt,{number:r.number,color:a}):null]})]})}const Ee=(e,{name:t})=>{const n=me(e),r=J(e);return{proxy:n[t],latency:r[t]}},en=C(Ee)(Jt),tn=C(Ee)(Vt),nn="_list_16726_4",rn="_detail_16726_10",on="_summary_16726_19",$={list:nn,detail:rn,summary:on};function Te({all:e,now:t,isSelectable:n,itemOnTapCallback:r}){const o=e;return s("div",{className:g($.list,$.detail),children:o.map(i=>s(en,{onClick:r,isSelectable:n,name:i,now:i===t},i))})}function Se({all:e,now:t,isSelectable:n,itemOnTapCallback:r}){return s("div",{className:g($.list,$.summary),children:e.map(o=>s(tn,{onClick:r,isSelectable:n,name:o,now:o===t},o))})}const{createElement:sn,useCallback:U,useMemo:an,useState:cn}=_;function ln(){return s("div",{className:Oe.zapWrapper,children:s(S,{size:16})})}function un({name:e,all:t,delay:n,hideUnavailableProxies:r,proxySortBy:o,proxies:i,type:a,now:c,isOpen:l,apiConfig:d,dispatch:h}){const f=Ce(t,n,r,o,i),{data:p}=Ue(["/version",d],()=>Ve("/version",d)),y=an(()=>["Selector",p.meta&&"Fallback"].includes(a),[a,p.meta]),{app:{updateCollapsibleIsOpen:m},proxies:{requestDelayForProxies:R}}=j(),M=U(()=>{m("proxyGroup",e,!l)},[l,m,e]),W=U(D=>{y&&h(Ke(d,e,D))},[d,h,e,y]),[H,A]=cn(!1),G=U(async()=>{A(!0);try{p.meta===!0?(await Ye(d,e),await h(Z(d))):(await R(d,f),await h(Z(d)))}catch{}A(!1)},[f,d,h,e,p.meta]);return u("div",{className:Oe.group,children:[u("div",{style:{display:"flex",alignItems:"center"},children:[s(xe,{name:e,type:a,toggle:M,qty:f.length,isOpen:l}),s(b,{title:"Test latency",kind:"minimal",onClick:G,isLoading:H,children:s(ln,{})})]}),sn(l?Te:Se,{all:f,now:c,isSelectable:y,itemOnTapCallback:W})]})}const dn=C((e,{name:t,delay:n})=>{const r=me(e),o=_e(e),i=ee(e),a=te(e),c=r[t],{all:l,type:d,now:h}=c;return{all:l,delay:n,hideUnavailableProxies:a,proxySortBy:i,proxies:r,type:d,now:h,isOpen:o[`proxyGroup:${t}`]}})(un),{useCallback:Re,useState:hn}=_;function fn({dispatch:e,apiConfig:t,name:n}){return Re(()=>e(Ze(t,n)),[t,e,n])}function pn({dispatch:e,apiConfig:t,names:n}){const[r,o]=hn(!1);return[Re(async()=>{if(!r){o(!0);try{await e(Xe(t,n))}catch{}o(!1)}},[t,e,n,r]),r]}const{useState:vn,useCallback:yn}=_;function mn({isLoading:e}){return e?s(ut,{children:s(S,{width:16,height:16})}):s(S,{width:16,height:16})}function _n({dispatch:e,apiConfig:t}){const[n,r]=vn(!1);return[yn(()=>{n||(r(!0),e(Qe(t)).then(()=>r(!1),()=>r(!1)))},[t,e,n]),n]}function bn({dispatch:e,apiConfig:t,proxyProviders:n}){const{t:r}=ne(),[o,i]=_n({dispatch:e,apiConfig:t}),[a,c]=pn({apiConfig:t,dispatch:e,names:n.map(l=>l.name)});return s(at,{icon:s(mn,{isLoading:i}),onClick:o,text:r("Test Latency"),style:ct,children:n.length>0?s(lt,{text:r("update_all_proxy_provider"),onClick:a,children:s(dt,{isRotating:c})}):null})}var Me=function(){if(typeof Map<"u")return Map;function e(t,n){var r=-1;return t.some(function(o,i){return o[0]===n?(r=i,!0):!1}),r}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(n){var r=e(this.__entries__,n),o=this.__entries__[r];return o&&o[1]},t.prototype.set=function(n,r){var o=e(this.__entries__,n);~o?this.__entries__[o][1]=r:this.__entries__.push([n,r])},t.prototype.delete=function(n){var r=this.__entries__,o=e(r,n);~o&&r.splice(o,1)},t.prototype.has=function(n){return!!~e(this.__entries__,n)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(n,r){r===void 0&&(r=null);for(var o=0,i=this.__entries__;o<i.length;o++){var a=i[o];n.call(r,a[1],a[0])}},t}()}(),Q=typeof window<"u"&&typeof document<"u"&&window.document===document,F=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),gn=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(F):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),wn=2;function xn(e,t){var n=!1,r=!1,o=0;function i(){n&&(n=!1,e()),r&&c()}function a(){gn(i)}function c(){var l=Date.now();if(n){if(l-o<wn)return;r=!0}else n=!0,r=!1,setTimeout(a,t);o=l}return c}var Cn=20,On=["top","right","bottom","left","width","height","size","weight"],Pn=typeof MutationObserver<"u",kn=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=xn(this.refresh.bind(this),Cn)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var n=this.observers_,r=n.indexOf(t);~r&&n.splice(r,1),!n.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return t.forEach(function(n){return n.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!Q||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Pn?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!Q||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var n=t.propertyName,r=n===void 0?"":n,o=On.some(function(i){return!!~r.indexOf(i)});o&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),Ae=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},x=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||F},De=I(0,0,0,0);function z(e){return parseFloat(e)||0}function ae(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(r,o){var i=e["border-"+o+"-width"];return r+z(i)},0)}function En(e){for(var t=["top","right","bottom","left"],n={},r=0,o=t;r<o.length;r++){var i=o[r],a=e["padding-"+i];n[i]=z(a)}return n}function Tn(e){var t=e.getBBox();return I(0,0,t.width,t.height)}function Sn(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return De;var r=x(e).getComputedStyle(e),o=En(r),i=o.left+o.right,a=o.top+o.bottom,c=z(r.width),l=z(r.height);if(r.boxSizing==="border-box"&&(Math.round(c+i)!==t&&(c-=ae(r,"left","right")+i),Math.round(l+a)!==n&&(l-=ae(r,"top","bottom")+a)),!Mn(e)){var d=Math.round(c+i)-t,h=Math.round(l+a)-n;Math.abs(d)!==1&&(c-=d),Math.abs(h)!==1&&(l-=h)}return I(o.left,o.top,c,l)}var Rn=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof x(e).SVGGraphicsElement}:function(e){return e instanceof x(e).SVGElement&&typeof e.getBBox=="function"}}();function Mn(e){return e===x(e).document.documentElement}function An(e){return Q?Rn(e)?Tn(e):Sn(e):De}function Dn(e){var t=e.x,n=e.y,r=e.width,o=e.height,i=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,a=Object.create(i.prototype);return Ae(a,{x:t,y:n,width:r,height:o,top:n,right:t+r,bottom:o+n,left:t}),a}function I(e,t,n,r){return{x:e,y:t,width:n,height:r}}var Ln=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=I(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=An(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),Nn=function(){function e(t,n){var r=Dn(n);Ae(this,{target:t,contentRect:r})}return e}(),Bn=function(){function e(t,n,r){if(this.activeObservations_=[],this.observations_=new Me,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=n,this.callbackCtx_=r}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof x(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)||(n.set(t,new Ln(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof x(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)&&(n.delete(t),n.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&t.activeObservations_.push(n)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,n=this.activeObservations_.map(function(r){return new Nn(r.target,r.broadcastRect())});this.callback_.call(t,n,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),Le=typeof WeakMap<"u"?new WeakMap:new Me,Ne=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=kn.getInstance(),r=new Bn(t,n,this);Le.set(this,r)}return e}();["observe","unobserve","disconnect"].forEach(function(e){Ne.prototype[e]=function(){var t;return(t=Le.get(this))[e].apply(t,arguments)}});var $n=function(){return typeof F.ResizeObserver<"u"?F.ResizeObserver:Ne}();const{memo:Fn,useState:zn,useRef:Be,useEffect:$e}=V;function qn(e){const t=Be();return $e(()=>void(t.current=e),[e]),t.current}function jn(){const e=Be(),[t,n]=zn({height:0});return $e(()=>{const r=new $n(([o])=>n(o.contentRect));return e.current&&r.observe(e.current),()=>r.disconnect()},[]),[e,t]}const In={initialOpen:{height:"auto",transition:{duration:0}},open:e=>({height:e,opacity:1,visibility:"visible",transition:{duration:.3}}),closed:{height:0,opacity:0,visibility:"hidden",overflowY:"hidden",transition:{duration:.3}}},Wn={open:{},closed:{}},ce=Fn(({children:e,isOpen:t})=>{const r=be.read().motion,o=qn(t),[i,{height:a}]=jn();return s("div",{children:s(r.div,{animate:t&&o===t?"initialOpen":t?"open":"closed",custom:a,variants:In,children:s(r.div,{variants:Wn,ref:i,children:e})})})}),Hn="_updatedAt_sis46_4",Gn="_body_sis46_11",Un="_actionFooter_sis46_20",Kn="_refresh_sis46_30",E={updatedAt:Hn,body:Gn,actionFooter:Un,refresh:Kn},{useState:Yn,useCallback:le}=_;function Vn({name:e,proxies:t,delay:n,hideUnavailableProxies:r,proxySortBy:o,vehicleType:i,updatedAt:a,subscriptionInfo:c,isOpen:l,dispatch:d,apiConfig:h}){const f=Ce(t,n,r,o),[p,y]=Yn(!1),m=fn({dispatch:d,apiConfig:h,name:e}),R=le(async()=>{y(!0),await d(Je(h,e)),y(!1)},[h,d,e,y]),{app:{updateCollapsibleIsOpen:M}}=j(),W=le(()=>{M("proxyProvider",e,!l)},[l,M,e]),H=ft(new Date(a),new Date),A=c?ue(c.Total):0,G=c?ue(c.Total-c.Download-c.Upload):0,D=c?((c.Total-c.Download-c.Upload)/c.Total*100).toFixed(2):0,Fe=()=>{if(c.Expire===0)return"Null";const O=new Date(c.Expire*1e3),ze=O.getFullYear()+"-",qe=(O.getMonth()+1<10?"0"+(O.getMonth()+1):O.getMonth()+1)+"-",je=O.getDate()+" ";return ze+qe+je};return u("div",{className:E.body,children:[u("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[s(xe,{name:e,toggle:W,type:i,isOpen:l,qty:f.length}),s(b,{kind:"minimal",start:s(de,{}),onClick:m}),s(b,{kind:"minimal",start:s(S,{size:16}),onClick:R,isLoading:p})]}),c&&s("div",{className:E.updatedAt,children:u("small",{children:[G," / ",A," ( ",D,"% )    Expire: ",Fe()," "]})}),s("div",{className:E.updatedAt,children:u("small",{children:["Updated ",H," ago"]})}),u(ce,{isOpen:l,children:[s(Te,{all:f}),u("div",{className:E.actionFooter,children:[s(b,{text:"Update",start:s(de,{}),onClick:m}),s(b,{text:"Health Check",start:s(S,{size:16}),onClick:R,isLoading:p})]})]}),s(ce,{isOpen:!l,children:s(Se,{all:f})})]})}const Zn={rest:{scale:1},pressed:{scale:.95}},Xn={rest:{rotate:0},hover:{rotate:360,transition:{duration:.3}}};function ue(e,t=2){if(!+e)return"0 Bytes";const n=1024,r=t<0?0:t,o=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(n));return`${parseFloat((e/Math.pow(n,i)).toFixed(r))} ${o[i]}`}function de(){const t=be.read().motion;return s(t.div,{className:E.refresh,variants:Zn,initial:"rest",whileHover:"hover",whileTap:"pressed",children:s(t.div,{className:"flexCenter",variants:Xn,children:s(pt,{size:16})})})}const Qn=(e,{proxies:t,name:n})=>{const r=te(e),o=J(e),i=_e(e),a=ge(e),c=ee(e);return{apiConfig:a,proxies:t,delay:o,hideUnavailableProxies:r,proxySortBy:c,isOpen:i[`proxyProvider:${n}`]}},Jn=C(Qn)(Vn);function er({items:e}){return e.length===0?null:u(q,{children:[s(we,{title:"Proxy Provider"}),s("div",{children:e.map(t=>s(Jn,{name:t.name,proxies:t.proxies,type:t.type,vehicleType:t.vehicleType,updatedAt:t.updatedAt,subscriptionInfo:t.subscriptionInfo},t.name))})]})}const tr="_labeledInput_cmki0_1",K={labeledInput:tr},nr=[["Natural","order_natural"],["LatencyAsc","order_latency_asc"],["LatencyDesc","order_latency_desc"],["NameAsc","order_name_asc"],["NameDesc","order_name_desc"]],{useCallback:he}=_;function rr({appConfig:e}){const{app:{updateAppConfig:t}}=j(),n=he(i=>{t("proxySortBy",i.target.value)},[t]),r=he(i=>{t("hideUnavailableProxies",i)},[t]),{t:o}=ne();return u(q,{children:[u("div",{className:K.labeledInput,children:[s("span",{children:o("sort_in_grp")}),s("div",{children:s(vt,{options:nr.map(i=>[i[0],o(i[1])]),selected:e.proxySortBy,onChange:n})})]}),s("hr",{}),u("div",{className:K.labeledInput,children:[s("span",{children:o("hide_unavail_proxies")}),s("div",{children:s(oe,{name:"hideUnavailableProxies",checked:e.hideUnavailableProxies,onChange:r})})]}),u("div",{className:K.labeledInput,children:[s("span",{children:o("auto_close_conns")}),s("div",{children:s(oe,{name:"autoCloseOldConns",checked:e.autoCloseOldConns,onChange:i=>t("autoCloseOldConns",i)})})]})]})}const or=e=>{const t=ee(e),n=te(e),r=et(e);return{appConfig:{proxySortBy:t,hideUnavailableProxies:n,autoCloseOldConns:r}}},sr=C(or)(rr),ir="_overlay_uuk3b_1",ar="_cnt_uuk3b_5",cr="_afterOpen_uuk3b_16",Y={overlay:ir,cnt:ar,afterOpen:cr},{useMemo:lr}=_;function fe({isOpen:e,onRequestClose:t,children:n}){const r=lr(()=>({base:g(se.content,Y.cnt),afterOpen:Y.afterOpen,beforeClose:""}),[]);return s(tt,{isOpen:e,onRequestClose:t,className:r,overlayClassName:g(se.overlay,Y.overlay),children:n})}function ur({color:e="currentColor",size:t=24}){return u("svg",{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:t,height:t,stroke:e,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s("path",{d:"M2 6h9M18.5 6H22"}),s("circle",{cx:"16",cy:"6",r:"2"}),s("path",{d:"M22 18h-9M6 18H2"}),s("circle",{r:"2",transform:"matrix(-1 0 0 1 8 18)"})]})}const dr="_topBar_15n7g_4",hr="_topBarRight_15n7g_16",fr="_textFilterContainer_15n7g_25",pr="_group_15n7g_32",B={topBar:dr,topBarRight:hr,textFilterContainer:fr,group:pr},{useState:vr,useEffect:yr,useCallback:pe,useRef:mr}=_;function _r({dispatch:e,groupNames:t,delay:n,proxyProviders:r,apiConfig:o,showModalClosePrevConns:i}){const a=mr({}),c=pe(()=>{a.current.startAt=Date.now(),e(Z(o)).then(()=>{a.current.completeAt=Date.now()})},[o,e]);yr(()=>{c();const m=()=>{a.current.startAt&&Date.now()-a.current.startAt>3e4&&c()};return window.addEventListener("focus",m,!1),()=>window.removeEventListener("focus",m,!1)},[c]);const[l,d]=vr(!1),h=pe(()=>{d(!1)},[]),{proxies:{closeModalClosePrevConns:f,closePrevConnsAndTheModal:p}}=j(),{t:y}=ne();return u(q,{children:[s(fe,{isOpen:l,onRequestClose:h,children:s(sr,{})}),u("div",{className:B.topBar,children:[s(we,{title:y("Proxies")}),u("div",{className:B.topBarRight,children:[s("div",{className:B.textFilterContainer,children:s(ht,{textAtom:ve})}),s(nt,{label:y("settings"),children:s(b,{kind:"minimal",onClick:()=>d(!0),children:s(ur,{size:16})})})]})]}),s("div",{children:t.map(m=>s("div",{className:B.group,children:s(dn,{name:m,delay:n,apiConfig:o,dispatch:e})},m))}),s(er,{items:r}),s("div",{style:{height:60}}),s(bn,{dispatch:e,apiConfig:o,proxyProviders:r}),s(fe,{isOpen:i,onRequestClose:f,children:s(xt,{onClickPrimaryButton:()=>p(o),onClickSecondaryButton:f})})]})}const br=e=>({apiConfig:ge(e),groupNames:rt(e),proxyProviders:ot(e),delay:J(e),showModalClosePrevConns:st(e)}),Tr=C(br)(_r);export{Tr as default};
